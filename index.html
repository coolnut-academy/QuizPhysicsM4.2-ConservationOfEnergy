<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå 2 ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏é‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏• - Physics Quiz Game">
    <title>‡∏Å‡∏é‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏• - Physics Quiz</title>
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öõÔ∏è</text></svg>">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Prompt for Thai text -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX Rendering -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        html, body {
            overflow-x: hidden !important;
            max-width: 100vw;
        }
        
        body {
            font-family: 'Prompt', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }
        
        main {
            overflow-x: hidden !important;
            max-width: 100%;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #93c5fd; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3b82f6; 
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Answer Result Animations */
        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100px) rotate(360deg); opacity: 0; }
        }

        .result-correct {
            animation: celebrate 0.6s ease-in-out, bounceIn 0.5s ease-out;
        }

        .result-incorrect {
            animation: shake 0.5s ease-in-out, bounceIn 0.3s ease-out;
        }

        .result-icon {
            animation: bounceIn 0.6s ease-out;
        }

        /* Loading State */
        .mathjax-loading {
            position: relative;
            min-height: 40px;
        }

        .mathjax-loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #93c5fd;
            border-top-color: #3b82f6;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .btn-hitech {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.2), 0 2px 4px -1px rgba(59, 130, 246, 0.1);
        }
        .btn-hitech:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.3), 0 4px 6px -2px rgba(59, 130, 246, 0.1);
        }
        .btn-hitech:active {
            transform: translateY(0);
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        /* MathJax Adjustments - Responsive */
        mjx-container {
            font-size: 100% !important;
        }
        
        @media (min-width: 640px) {
            mjx-container {
                font-size: 110% !important;
            }
        }
        
        @media (min-width: 1024px) {
            mjx-container {
                font-size: 120% !important;
            }
        }
        
        /* Touch-friendly buttons on mobile */
        @media (max-width: 640px) {
            button, .btn-hitech {
                min-height: 44px;
            }
        }

        /* Enhanced Focus Indicators */
        *:focus-visible {
            outline: 3px solid #3b82f6;
            outline-offset: 2px;
            border-radius: 4px;
        }

        button:focus-visible,
        input:focus-visible {
            outline: 3px solid #3b82f6;
            outline-offset: 2px;
        }

        /* Better contrast for accessibility */
        .text-low-contrast {
            color: #64748b; /* slate-500 instead of slate-400 */
        }

        /* Allow content to expand without scrollbar */
        #examples-container .mathjax-loading {
            overflow-x: visible;
            word-wrap: break-word;
            line-height: 2;
        }

        /* Keep MathJax beautiful and properly displayed - each equation on new line */
        #examples-container .mathjax-loading mjx-container {
            display: block !important;
            margin: 1em auto !important;
            text-align: center;
            max-width: 100%;
            overflow-x: visible;
        }

        /* Allow cards to expand to fit content */
        #examples-container > div {
            overflow: visible;
            min-width: 0; /* Allow flex shrinking */
        }

        /* Style for example images */
        #examples-container img {
            max-width: 100%;
            height: auto;
            object-fit: contain;
        }

        /* Ensure MathJax SVG doesn't cause overflow */
        #examples-container mjx-container > svg {
            max-width: 100% !important;
            height: auto !important;
        }
    </style>
</head>
<body class="text-slate-800 overflow-x-hidden">

    <!-- Navbar -->
    <nav class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50" role="navigation" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
        <div class="max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8">
            <div class="flex justify-between h-14 sm:h-16 items-center">
                <div class="flex items-center cursor-pointer" onclick="showSection('home')" role="button" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å" tabindex="0" onkeypress="if(event.key==='Enter') showSection('home')">
                    <i class="fa-solid fa-atom text-blue-600 text-xl sm:text-2xl mr-1 sm:mr-2" aria-hidden="true"></i>
                    <span class="font-bold text-base sm:text-lg md:text-xl text-blue-900 tracking-wide">‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå: <span class="text-blue-500">‡∏Å‡∏é‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏•</span></span>
                </div>
                <div>
                    <button onclick="showSection('home')" class="text-slate-500 hover:text-blue-600 transition p-2 text-sm sm:text-base" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">
                        <i class="fa-solid fa-house" aria-hidden="true"></i> <span class="hidden sm:inline">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header Info -->
    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100">
        <div class="max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-2 sm:py-3">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-2 text-center sm:text-left">
                <div class="text-xs sm:text-sm text-slate-600">
                    <i class="fa-solid fa-book text-blue-600 mr-1"></i>
                    <span class="font-medium">‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤ ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå 2</span>
                    <span class="mx-1 sm:mx-2 text-slate-400">|</span>
                    <span class="font-mono">‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤ ‡∏ß31202</span>
                </div>
                <div class="text-xs sm:text-sm text-slate-600">
                    <i class="fa-solid fa-school text-indigo-600 mr-1"></i>
                    <span>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≠‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡πÉ‡∏ô‡∏û‡∏£‡∏∞‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå‡∏Ø</span>
                </div>
                <div class="text-xs sm:text-sm text-slate-600">
                    <i class="fa-solid fa-chalkboard-user text-purple-600 mr-1"></i>
                    <span class="font-medium">‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô:</span> <span>‡∏ô‡∏≤‡∏¢‡∏™‡∏≤‡∏ò‡∏¥‡∏ï ‡∏®‡∏¥‡∏£‡∏¥‡∏ß‡∏±‡∏ä‡∏ô‡πå</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="max-w-6xl mx-auto p-3 sm:p-4 md:p-6 mb-6 sm:mb-10">

        <!-- SECTION: HOME -->
        <section id="home" class="fade-in min-h-[70vh] sm:min-h-[80vh] flex flex-col items-center justify-center text-center py-4 sm:py-6">
            <div class="bg-white rounded-2xl sm:rounded-3xl shadow-xl p-6 sm:p-8 md:p-10 lg:p-16 relative overflow-hidden max-w-4xl w-full border border-blue-100">
                <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-400 to-indigo-600"></div>
                
                <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-800 mb-3 sm:mb-4 px-2">‡∏Å‡∏é‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏•</h1>
                <p class="text-base sm:text-lg text-slate-500 mb-6 sm:mb-8 md:mb-10 px-2">Law of Conservation of Mechanical Energy</p>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6 mb-8 sm:mb-10 md:mb-12">
                    <button onclick="showSection('learn')" class="btn-hitech bg-white border-2 border-blue-100 p-4 sm:p-5 md:p-6 rounded-xl sm:rounded-2xl flex flex-col items-center hover:border-blue-500 hover:bg-blue-50 active:scale-95 group focus:ring-2 focus:ring-blue-500 focus:outline-none" aria-label="‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤">
                        <div class="bg-blue-100 text-blue-600 w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center text-xl sm:text-2xl mb-3 sm:mb-4 group-hover:bg-blue-600 group-hover:text-white group-hover:scale-110 transition-all duration-300">
                            <i class="fa-solid fa-book-open" aria-hidden="true"></i>
                        </div>
                        <h3 class="font-semibold text-base sm:text-lg text-slate-700">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</h3>
                        <p class="text-xs sm:text-sm text-slate-500 mt-1 sm:mt-2">‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏§‡∏©‡∏é‡∏µ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</p>
                    </button>

                    <button onclick="setupGroupQuiz()" class="btn-hitech bg-white border-2 border-blue-100 p-4 sm:p-5 md:p-6 rounded-xl sm:rounded-2xl flex flex-col items-center hover:border-indigo-500 hover:bg-indigo-50 active:scale-95 group focus:ring-2 focus:ring-indigo-500 focus:outline-none" aria-label="‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏Å‡∏•‡∏∏‡πà‡∏°">
                        <div class="bg-indigo-100 text-indigo-600 w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center text-xl sm:text-2xl mb-3 sm:mb-4 group-hover:bg-indigo-600 group-hover:text-white group-hover:scale-110 transition-all duration-300">
                            <i class="fa-solid fa-users" aria-hidden="true"></i>
                        </div>
                        <h3 class="font-semibold text-base sm:text-lg text-slate-700">‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏Å‡∏•‡∏∏‡πà‡∏°</h3>
                        <p class="text-xs sm:text-sm text-slate-500 mt-1 sm:mt-2">‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå 4 ‡∏Å‡∏•‡∏∏‡πà‡∏°</p>
                    </button>

                    <button onclick="setupSoloQuiz()" class="btn-hitech bg-white border-2 border-blue-100 p-4 sm:p-5 md:p-6 rounded-xl sm:rounded-2xl flex flex-col items-center hover:border-sky-500 hover:bg-sky-50 active:scale-95 group sm:col-span-2 lg:col-span-1 focus:ring-2 focus:ring-sky-500 focus:outline-none" aria-label="‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß">
                        <div class="bg-sky-100 text-sky-600 w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center text-xl sm:text-2xl mb-3 sm:mb-4 group-hover:bg-sky-600 group-hover:text-white group-hover:scale-110 transition-all duration-300">
                            <i class="fa-solid fa-user-graduate" aria-hidden="true"></i>
                        </div>
                        <h3 class="font-semibold text-base sm:text-lg text-slate-700">‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß</h3>
                        <p class="text-xs sm:text-sm text-slate-500 mt-1 sm:mt-2">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</p>
                    </button>
                </div>

                <div class="mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-slate-100">
                    <p class="text-slate-500 text-xs sm:text-sm font-light px-2">
                        <i class="fa-solid fa-code mr-1" aria-hidden="true"></i> ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÇ‡∏î‡∏¢: <span class="text-blue-600 font-medium">‡∏ô‡∏≤‡∏¢‡∏™‡∏≤‡∏ò‡∏¥‡∏ï ‡∏®‡∏¥‡∏£‡∏¥‡∏ß‡∏±‡∏ä‡∏ô‡πå (Coolnut)</span>
                    </p>
                </div>
            </div>
        </section>

        <!-- SECTION: LEARN -->
        <section id="learn" class="hidden fade-in" aria-label="‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
            <div class="mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3 flex-wrap">
                <button onclick="showSection('home')" class="bg-white p-2 sm:p-2.5 rounded-full shadow hover:bg-slate-50 text-slate-600 text-sm sm:text-base focus:ring-2 focus:ring-blue-500" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">
                    <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
                </button>
                <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-slate-800">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ‡∏Å‡∏é‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏•</h2>
            </div>

            <!-- Concept Card -->
            <div class="glass-panel p-4 sm:p-5 md:p-6 rounded-xl sm:rounded-2xl shadow-sm mb-4 sm:mb-6 border-l-4 border-blue-500">
                <h3 class="text-lg sm:text-xl font-bold text-blue-700 mb-2"><i class="fa-solid fa-lightbulb mr-2"></i>‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</h3>
                <p class="text-sm sm:text-base text-slate-700 leading-relaxed">
                    "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ" ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏£‡∏á‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏£‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏î‡∏ó‡∏≤‡∏ô) ‡∏°‡∏≤‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ 
                    ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡∏à‡∏∞‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏°‡∏≠ <br>
                    <div class="text-center my-3 sm:my-4 text-lg sm:text-xl overflow-x-hidden">
                        $$ \Sigma E_{\text{‡∏Å‡πà‡∏≠‡∏ô}} = \Sigma E_{\text{‡∏´‡∏•‡∏±‡∏á}} $$
                    </div>
                </p>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mt-3 sm:mt-4">
                    <div class="bg-orange-50 p-3 sm:p-4 rounded-lg sm:rounded-xl border border-orange-100">
                        <div class="font-bold text-sm sm:text-base text-orange-600">‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏•‡∏ô‡πå \( (E_k) \)</div>
                        <div class="text-xs sm:text-sm text-slate-600">‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà</div>
                        <div class="text-center mt-2 font-bold text-sm sm:text-base overflow-x-hidden">$$ E_k = \frac{1}{2}mv^2 $$</div>
                    </div>
                    <div class="bg-emerald-50 p-3 sm:p-4 rounded-lg sm:rounded-xl border border-emerald-100">
                        <div class="font-bold text-sm sm:text-base text-emerald-600">‡∏®‡∏±‡∏Å‡∏¢‡πå‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á \( (E_p) \)</div>
                        <div class="text-xs sm:text-sm text-slate-600">‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á</div>
                        <div class="text-center mt-2 font-bold text-sm sm:text-base overflow-x-hidden">$$ E_p = mgh $$</div>
                    </div>
                    <div class="bg-purple-50 p-3 sm:p-4 rounded-lg sm:rounded-xl border border-purple-100 sm:col-span-2 lg:col-span-1">
                        <div class="font-bold text-sm sm:text-base text-purple-600">‡∏®‡∏±‡∏Å‡∏¢‡πå‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô \( (E_s) \)</div>
                        <div class="text-xs sm:text-sm text-slate-600">‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏¢‡∏∑‡∏î/‡∏´‡∏î</div>
                        <div class="text-center mt-2 font-bold text-sm sm:text-base overflow-x-hidden">$$ E_s = \frac{1}{2}kx^2 $$</div>
                    </div>
                </div>
            </div>

            <!-- Examples -->
            <div class="space-y-4 sm:space-y-6">
                <h3 class="text-base sm:text-lg font-bold text-slate-700 ml-1 sm:ml-2">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (‡πÉ‡∏ä‡πâ \( g = 9.8 \ m/s^2 \))</h3>
                
                <!-- Example Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 md:gap-6" id="examples-container">
                    <!-- Example items will be injected by JS for cleanliness -->
                </div>
            </div>
        </section>

        <!-- SECTION: GROUP QUIZ -->
        <section id="group-quiz" class="hidden fade-in" aria-label="‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏Å‡∏•‡∏∏‡πà‡∏°">
            <div class="mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4">
                <div class="flex items-center gap-2 sm:gap-3 flex-wrap">
                    <button onclick="showSection('home')" class="bg-white p-2 sm:p-2.5 rounded-full shadow hover:bg-slate-50 text-slate-600 text-sm sm:text-base focus:ring-2 focus:ring-blue-500" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">
                        <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
                    </button>
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-slate-800">‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏Å‡∏•‡∏∏‡πà‡∏° (Group Quiz)</h2>
                </div>
                <button onclick="setupGroupQuiz()" class="btn-hitech bg-blue-600 text-white px-4 sm:px-6 py-2 sm:py-2.5 rounded-lg sm:rounded-xl shadow-lg hover:bg-blue-700 active:scale-95 text-sm sm:text-base w-full sm:w-auto focus:ring-2 focus:ring-blue-300" aria-label="‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà">
                    <i class="fa-solid fa-shuffle mr-2" aria-hidden="true"></i> ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 md:gap-6" id="group-quiz-container">
                <!-- Group cards generated by JS -->
            </div>
        </section>

        <!-- SECTION: SOLO QUIZ -->
        <section id="solo-quiz" class="hidden fade-in" aria-label="‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß">
            <div class="mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3 flex-wrap">
                <button onclick="showSection('home')" class="bg-white p-2 sm:p-2.5 rounded-full shadow hover:bg-slate-50 text-slate-600 text-sm sm:text-base focus:ring-2 focus:ring-blue-500" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">
                    <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
                </button>
                <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-slate-800">‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (Solo Quiz)</h2>
            </div>

            <div class="max-w-2xl mx-auto" id="solo-quiz-container">
                <!-- Solo card generated by JS -->
            </div>
        </section>

    </main>

    <!-- JS LOGIC -->
    <script>
        // --- CONSTANTS ---
        const g = 9.8;
        const scenariosBase = [
            {
                id: 'ek_ep',
                type: '\\( E_k \\rightarrow E_p \\)',
                title: '‡πÇ‡∏¢‡∏ô‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡πÅ‡∏ô‡∏ß‡∏î‡∏¥‡πà‡∏á',
                desc: '‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏°‡∏ß‡∏• 2 kg ‡∏ñ‡∏π‡∏Å‡πÇ‡∏¢‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏ï‡πâ‡∏ô (<b>[N]</b> + 4) m/s ‡∏à‡∏á‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ',
                varUnit: 'm/s',
                ansUnit: 'm',
                solve: (n) => {
                    // Ek = Ep => 1/2*m*v^2 = m*g*h => h = v^2 / 2g
                    // When N=1: v = 1+4 = 5, h = 5¬≤/(2*9.8) = 25/19.6 ‚âà 1.28 > 1 ‚úì
                    const v = n + 4;
                    return (Math.pow(v, 2)) / (2 * g);
                },
                formula: '$$ \\frac{1}{2}mv^2 = mgh \\Rightarrow h = \\frac{v^2}{2g} $$'
            },
            {
                id: 'ek_es',
                type: '\\( E_k \\rightarrow E_s \\)',
                title: '‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ß‡∏¥‡πà‡∏á‡∏ä‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á',
                desc: '‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏°‡∏ß‡∏• 8 kg ‡∏ß‡∏¥‡πà‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß <b>[N]</b> m/s ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ô‡∏¥‡∏à 20 N/m ‡∏à‡∏á‡∏´‡∏≤‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏´‡∏î‡∏ï‡∏±‡∏ß‡∏Å‡∏µ‡πà‡πÄ‡∏°‡∏ï‡∏£',
                varUnit: 'm/s',
                ansUnit: 'm',
                solve: (n) => {
                    // Ek = Es => 1/2*m*v^2 = 1/2*k*x^2 => m*v^2 = k*x^2 => x = v * sqrt(m/k)
                    // When N=1: x = 1 * sqrt(8/20) = sqrt(0.4) ‚âà 0.632 < 1
                    // Adjust: Increase m or decrease k to ensure x > 1 when N=1
                    // With m=8, k=20: x = 1 * sqrt(8/20) ‚âà 0.632, need x > 1
                    // Better: m=50, k=20 => x = 1 * sqrt(50/20) = sqrt(2.5) ‚âà 1.58 > 1 ‚úì
                    const m = 50; const k = 20;
                    return n * Math.sqrt(m / k);
                },
                formula: '$$ \\frac{1}{2}mv^2 = \\frac{1}{2}kx^2 \\Rightarrow x = v\\sqrt{\\frac{m}{k}} $$'
            },
            {
                id: 'ep_ek',
                type: '\\( E_p \\rightarrow E_k \\)',
                title: '‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ï‡∏Å‡∏≠‡∏¥‡∏™‡∏£‡∏∞',
                desc: '‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏à‡∏≤‡∏Å‡∏ï‡∏∂‡∏Å‡∏™‡∏π‡∏á <b>[N]</b> ‡πÄ‡∏°‡∏ï‡∏£ ‡∏à‡∏á‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏Ç‡∏ì‡∏∞‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏û‡∏∑‡πâ‡∏ô',
                varUnit: 'm',
                ansUnit: 'm/s',
                solve: (n) => {
                    // Ep = Ek => mgh = 1/2*mv^2 => v = sqrt(2gh)
                    // When N=1: v = sqrt(2*9.8*1) = sqrt(19.6) ‚âà 4.43 > 1 ‚úì
                    return Math.sqrt(2 * g * n);
                },
                formula: '$$ mgh = \\frac{1}{2}mv^2 \\Rightarrow v = \\sqrt{2gh} $$'
            },
            {
                id: 'ep_es',
                type: '\\( E_p \\rightarrow E_s \\)',
                title: '‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÉ‡∏™‡πà‡∏™‡∏õ‡∏£‡∏¥‡∏á',
                desc: '‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏°‡∏ß‡∏• 10 kg ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á <b>[N]</b> ‡πÄ‡∏°‡∏ï‡∏£ ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏™‡∏õ‡∏£‡∏¥‡∏á (‡∏ß‡∏±‡∏î‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏™‡∏°‡∏î‡∏∏‡∏•) ‡πÇ‡∏î‡∏¢‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ô‡∏¥‡∏à 50 N/m ‡∏à‡∏á‡∏´‡∏≤‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏´‡∏î‡∏ï‡∏±‡∏ß‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î‡∏Å‡∏µ‡πà‡πÄ‡∏°‡∏ï‡∏£ (‡∏Ñ‡∏¥‡∏î‡πÅ‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏£‡∏ß‡∏°)',
                varUnit: 'm',
                ansUnit: 'm',
                solve: (n) => {
                    // Ep = Es => mgh = 1/2*k*x^2 => x = sqrt(2mgh/k)
                    // When N=1: x = sqrt(2*5*9.8*1/100) = sqrt(98/100) ‚âà 0.99 < 1
                    // Adjust: Increase m or h, or decrease k
                    // With m=10, k=50: x = sqrt(2*10*9.8*1/50) = sqrt(196/50) = sqrt(3.92) ‚âà 1.98 > 1 ‚úì
                    const m = 10; const k = 50;
                    return Math.sqrt((2 * m * g * n) / k);
                },
                formula: '$$ mgh = \\frac{1}{2}kx^2 \\Rightarrow x = \\sqrt{\\frac{2mgh}{k}} $$'
            },
            {
                id: 'es_ek',
                type: '\\( E_s \\rightarrow E_k \\)',
                title: '‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏î‡∏µ‡∏î‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏',
                desc: '‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ô‡∏¥‡∏à <b>[N]</b>00 N/m ‡∏ñ‡∏π‡∏Å‡∏´‡∏î‡∏ï‡∏±‡∏ß 0.5 m ‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏µ‡∏î‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏°‡∏ß‡∏• 0.2 kg ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ ‡∏à‡∏á‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏',
                varUnit: '√ó100 N/m',
                ansUnit: 'm/s',
                solve: (n) => {
                    // Es = Ek => 1/2*k*x^2 = 1/2*m*v^2 => v = x * sqrt(k/m)
                    // When N=1: v = 0.3 * sqrt(100*1/0.5) = 0.3 * sqrt(200) ‚âà 4.24 > 1 ‚úì
                    // But to be safer, increase x or decrease m
                    // With x=0.5, m=0.2: v = 0.5 * sqrt(100*1/0.2) = 0.5 * sqrt(500) ‚âà 11.18 > 1 ‚úì
                    const k = n * 100; const x = 0.5; const m = 0.2;
                    return x * Math.sqrt(k / m);
                },
                formula: '$$ \\frac{1}{2}kx^2 = \\frac{1}{2}mv^2 \\Rightarrow v = x\\sqrt{\\frac{k}{m}} $$'
            },
            {
                id: 'es_ep',
                type: '\\( E_s \\rightarrow E_p \\)',
                title: '‡∏õ‡∏∑‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏¢‡∏¥‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ü‡πâ‡∏≤',
                desc: '‡∏õ‡∏∑‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏Ñ‡πà‡∏≤‡∏ô‡∏¥‡∏à 5000 N/m ‡∏ñ‡∏π‡∏Å‡∏´‡∏î‡∏£‡∏∞‡∏¢‡∏∞ <b>[N]</b> cm ‡∏¢‡∏¥‡∏á‡∏•‡∏π‡∏Å‡∏õ‡∏∑‡∏ô‡∏°‡∏ß‡∏• 0.1 kg ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ü‡πâ‡∏≤ ‡∏à‡∏á‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î',
                varUnit: 'cm',
                ansUnit: 'm',
                solve: (n) => {
                    // Es = Ep => 1/2*k*x^2 = mgh => h = kx^2 / 2mg
                    // When N=1: h = 2000*(1/100)¬≤/(2*0.2*9.8) = 2000*0.0001/3.92 ‚âà 0.051 < 1
                    // Adjust: Increase k or x, or decrease m
                    // With k=5000, x=n/100, m=0.1: h = 5000*(1/100)¬≤/(2*0.1*9.8) = 5000*0.0001/1.96 ‚âà 0.255 < 1
                    // Better: k=20000, m=0.1 => h = 20000*0.0001/1.96 ‚âà 1.02 > 1 ‚úì
                    const k = 20000; const x = n / 100; const m = 0.1; // Convert cm to m
                    return (k * Math.pow(x, 2)) / (2 * m * g);
                },
                formula: '$$ \\frac{1}{2}kx^2 = mgh \\Rightarrow h = \\frac{kx^2}{2mg} $$'
            }
        ];

        const exampleData = [
            { type: '\\( E_k = E_p \\)', title: '‡πÇ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏Ç‡∏∂‡πâ‡∏ô‡∏ü‡πâ‡∏≤', q: '‡∏ö‡∏≠‡∏•‡∏°‡∏ß‡∏• 1 kg ‡πÇ‡∏¢‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß 10 m/s ‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏Å‡∏µ‡πà‡πÄ‡∏°‡∏ï‡∏£?', method: '$$ \\Sigma E_{\\text{‡∏Å‡πà‡∏≠‡∏ô}} = \\Sigma E_{\\text{‡∏´‡∏•‡∏±‡∏á}} $$ $$ E_k = E_p $$ $$ \\frac{1}{2}(1)(10^2) = (1)(9.8)h $$ $$ 50 = 9.8h \\Rightarrow h \\approx 5.10\\ m $$' },
            { type: '\\( E_p = E_k \\)', title: '‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á‡∏ï‡∏Å', q: '‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á‡∏°‡∏ß‡∏• 2 kg ‡∏à‡∏≤‡∏Å‡∏™‡∏π‡∏á 5 m ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏ì‡∏∞‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?', method: '$$ \\Sigma E_{\\text{‡∏Å‡πà‡∏≠‡∏ô}} = \\Sigma E_{\\text{‡∏´‡∏•‡∏±‡∏á}} $$ $$ E_p = E_k $$ $$ (2)(9.8)(5) = \\frac{1}{2}(2)v^2 $$ $$ 98 = v^2 \\Rightarrow v \\approx 9.90\\ m/s $$' },
            { type: '\\( E_k = E_s \\)', title: '‡∏£‡∏ñ‡∏ä‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á', q: '‡∏£‡∏ñ‡∏°‡∏ß‡∏• 2 kg ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß 4 m/s ‡∏ä‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á k=200 N/m ‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏´‡∏î‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?', method: '$$ \\Sigma E_{\\text{‡∏Å‡πà‡∏≠‡∏ô}} = \\Sigma E_{\\text{‡∏´‡∏•‡∏±‡∏á}} $$ $$ E_k = E_s $$ $$ \\frac{1}{2}(2)(4^2) = \\frac{1}{2}(200)x^2 $$ $$ 16 = 100x^2 \\Rightarrow x = 0.40\\ m $$' },
            { type: '\\( E_p = E_s \\)', title: '‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏™‡∏õ‡∏£‡∏¥‡∏á', q: '‡∏°‡∏ß‡∏• 1 kg ‡∏ï‡∏Å‡∏à‡∏≤‡∏Å‡∏™‡∏π‡∏á 2 m ‡πÉ‡∏™‡πà‡∏™‡∏õ‡∏£‡∏¥‡∏á k=400 N/m ‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏´‡∏î‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?', method: '$$ \\Sigma E_{\\text{‡∏Å‡πà‡∏≠‡∏ô}} = \\Sigma E_{\\text{‡∏´‡∏•‡∏±‡∏á}} $$ $$ E_p = E_s $$ $$ (1)(9.8)(2) = \\frac{1}{2}(400)x^2 $$ $$ 19.6 = 200x^2 \\Rightarrow x \\approx 0.31\\ m $$' },
            { type: '\\( E_s = E_k \\)', title: '‡∏î‡∏µ‡∏î‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß', q: '‡∏™‡∏õ‡∏£‡∏¥‡∏á k=100 N/m ‡∏´‡∏î 0.2 m ‡∏î‡∏µ‡∏î‡∏•‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡∏ß‡∏°‡∏ß‡∏• 0.1 kg ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏´‡∏•‡∏∏‡∏î‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?', method: '$$ \\Sigma E_{\\text{‡∏Å‡πà‡∏≠‡∏ô}} = \\Sigma E_{\\text{‡∏´‡∏•‡∏±‡∏á}} $$ $$ E_s = E_k $$ $$ \\frac{1}{2}(100)(0.2^2) = \\frac{1}{2}(0.1)v^2 $$ $$ 2 = 0.05v^2 \\Rightarrow v \\approx 6.32\\ m/s $$' },
            { type: '\\( E_s = E_p \\)', title: '‡∏¢‡∏¥‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á', q: '‡∏™‡∏õ‡∏£‡∏¥‡∏á k=1000 N/m ‡∏´‡∏î 0.1 m ‡∏¢‡∏¥‡∏á‡∏°‡∏ß‡∏• 0.5 kg ‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏π‡∏á‡∏Å‡∏µ‡πà‡πÄ‡∏°‡∏ï‡∏£?', method: '$$ \\Sigma E_{\\text{‡∏Å‡πà‡∏≠‡∏ô}} = \\Sigma E_{\\text{‡∏´‡∏•‡∏±‡∏á}} $$ $$ E_s = E_p $$ $$ \\frac{1}{2}(1000)(0.1^2) = (0.5)(9.8)h $$ $$ 5 = 4.9h \\Rightarrow h \\approx 1.02\\ m $$' },
        ];

        // --- MATHJAX UTILS ---
        let mathJaxLoading = false;
        
        function typesetMath(container = null) {
            if (window.MathJax) {
                mathJaxLoading = true;
                const target = container || document.body;
                
                // Show loading indicator
                if (container) {
                    container.classList.add('mathjax-loading');
                }
                
                MathJax.typesetPromise([target]).then(() => {
                    mathJaxLoading = false;
                    if (container) {
                        container.classList.remove('mathjax-loading');
                    }
                }).catch((err) => {
                    mathJaxLoading = false;
                    if (container) {
                        container.classList.remove('mathjax-loading');
                    }
                    console.warn('MathJax rendering error:', err);
                });
            }
        }

        // --- NAVIGATION ---
        function showSection(id) {
            document.querySelectorAll('section').forEach(sec => sec.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            window.scrollTo(0, 0);

            if(id === 'learn') {
                renderExamples();
            } else {
                // Ensure MathJax renders static content when switching back if needed
                setTimeout(typesetMath, 50);
            }
        }

        // --- RENDER LEARN SECTION ---
        function renderExamples() {
            const container = document.getElementById('examples-container');
            // Image mapping: ex.1‚Üíquiz4, ex.2‚Üícustom URL, ex.3‚Üíquiz3, ex.4‚Üíquiz2, ex.5‚Üíquiz5, ex.6‚Üíquiz1
            const imageMapping = [
                4, 
                'https://img5.pic.in.th/file/secure-sv1/quiz2252a262ef662a1b21.png',
                3, 
                2, 
                5, 
                1
            ];
            container.innerHTML = exampleData.map((ex, idx) => {
                const imageSrc = typeof imageMapping[idx] === 'number' 
                    ? `https://img5.pic.in.th/file/secure-sv1/quiz${imageMapping[idx]}.png`
                    : imageMapping[idx];
                return `
                <div class="bg-white p-4 sm:p-5 md:p-6 rounded-xl sm:rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition" role="article" aria-label="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà ${idx + 1}: ${ex.title}">
                    <div class="flex items-center justify-between mb-2 sm:mb-3 flex-wrap gap-2">
                        <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 sm:px-3 py-1 rounded-full" aria-label="‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${ex.type}">${ex.type}</span>
                        <span class="text-slate-400 text-xs sm:text-sm">Ex ${idx + 1}</span>
                    </div>
                    <h4 class="font-bold text-sm sm:text-base text-slate-800 mb-2">${ex.title}</h4>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 sm:mb-4">${ex.q}</p>
                    <div class="mb-3 sm:mb-4 flex justify-center">
                        <img src="${imageSrc}" alt="‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå ${idx + 1}" class="max-w-full h-auto rounded-lg shadow-sm border border-slate-200" style="max-width: 100%; height: auto;">
                    </div>
                    <div class="bg-slate-50 p-2 sm:p-3 rounded-lg border border-slate-200">
                        <p class="text-xs text-slate-600 font-semibold mb-1">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥:</p>
                        <div class="text-slate-800 text-xs sm:text-sm mathjax-loading">
                            ${ex.method}
                        </div>
                    </div>
                </div>
                `;
            }).join('');
            
            // Trigger MathJax for all math content including badges
            typesetMath(container);
            
            // Also trigger for method sections with loading state
            const mathElements = container.querySelectorAll('.mathjax-loading');
            mathElements.forEach(el => {
                typesetMath(el);
            });
        }

        // --- UTILS ---
        function getRandomScenarios(count) {
            let shuffled = [...scenariosBase].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function formatDesc(desc, nVal) {
            // Handle special case for ek_ep where we need to show (N + 4)
            if (desc.includes('(<b>[N]</b> + 4)')) {
                if (nVal) {
                    return desc.replace('(<b>[N]</b> + 4)', `(<span class="text-blue-600 font-bold text-base sm:text-lg underline decoration-dashed">${nVal}</span> + 4)`);
                } else {
                    return desc.replace('(<b>[N]</b> + 4)', `(<span class="text-blue-600 font-bold text-base sm:text-lg underline decoration-dashed">?</span> + 4)`);
                }
            }
            // Default case: replace [N] with value
            return desc.replace('[N]', `<span class="text-blue-600 font-bold text-base sm:text-lg underline decoration-dashed">${nVal || '?'}</span>`);
        }

        // --- QUIZ LOGIC ---
        function createQuizCardHTML(scenario, index, isSolo = false) {
            const cardId = isSolo ? `solo-0` : `group-${index}`;
            const title = isSolo ? '‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•' : `‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà ${index + 1}`;
            const inputLabel = isSolo ? '‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì' : '‡∏ú‡∏•‡∏£‡∏ß‡∏°‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
            
            return `
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-lg border border-slate-100 overflow-hidden" id="card-${cardId}" role="article" aria-label="${title}">
                <div class="bg-gradient-to-r ${isSolo ? 'from-sky-500 to-cyan-500' : 'from-blue-500 to-indigo-600'} p-3 sm:p-4 text-white flex justify-between items-center flex-wrap gap-2">
                    <h3 class="font-bold text-base sm:text-lg"><i class="fa-solid ${isSolo ? 'fa-user' : 'fa-users'} mr-1 sm:mr-2" aria-hidden="true"></i>${title}</h3>
                    <span class="text-xs bg-white/20 px-2 py-1 rounded text-white font-mono" aria-label="‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${scenario.type}">${scenario.type}</span>
                </div>
                
                <div class="p-4 sm:p-5 md:p-6">
                    <div class="min-h-[60px] sm:min-h-[80px] mb-3 sm:mb-4 text-slate-700 text-xs sm:text-sm leading-relaxed" id="desc-${cardId}" aria-live="polite">
                        ${formatDesc(scenario.desc, null)}
                    </div>

                    <div class="space-y-3 sm:space-y-4">
                        <!-- Input Variable -->
                        <div>
                            <label for="input-n-${cardId}" class="block text-xs font-semibold text-slate-500 mb-1">${inputLabel}</label>
                            <input type="number" id="input-n-${cardId}" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 sm:py-2 text-slate-800 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç..." oninput="updateQuestionText('${cardId}', '${scenario.id}')" aria-label="${inputLabel}" onkeypress="if(event.key==='Enter') document.getElementById('input-ans-${cardId}').focus()">
                        </div>

                        <!-- Input Answer -->
                        <div>
                            <label for="input-ans-${cardId}" class="block text-xs font-semibold text-slate-500 mb-1">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ (${scenario.ansUnit})</label>
                            <input type="number" id="input-ans-${cardId}" step="0.01" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 sm:py-2 text-slate-800 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition" placeholder="‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° 2 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á" aria-label="‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ ${scenario.ansUnit}" onkeypress="if(event.key==='Enter') checkAnswer('${cardId}', '${scenario.id}')">
                        </div>

                        <div class="flex gap-2">
                            <button onclick="checkAnswer('${cardId}', '${scenario.id}')" class="flex-1 bg-slate-800 text-white py-2.5 sm:py-2 rounded-lg font-medium hover:bg-slate-700 active:scale-95 transition shadow-md text-sm sm:text-base focus:ring-2 focus:ring-slate-400" aria-label="‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö">
                                <i class="fa-solid fa-check mr-2" aria-hidden="true"></i>‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                            </button>
                            <button onclick="clearQuizCard('${cardId}')" class="bg-slate-200 text-slate-700 px-4 py-2.5 sm:py-2 rounded-lg font-medium hover:bg-slate-300 active:scale-95 transition shadow-sm text-sm sm:text-base focus:ring-2 focus:ring-slate-400" aria-label="‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">
                                <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Result Area -->
                    <div id="result-${cardId}" class="hidden mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-slate-100" aria-live="polite" aria-atomic="true"></div>
                </div>
            </div>
            `;
        }

        // Store current scenarios in memory
        let currentScenarios = {};

        function setupGroupQuiz() {
            showSection('group-quiz');
            const container = document.getElementById('group-quiz-container');
            container.innerHTML = '';
            currentScenarios = {};

            const scenarios = getRandomScenarios(4);
            
            scenarios.forEach((sc, idx) => {
                const key = `group-${idx}`;
                currentScenarios[key] = sc;
                container.innerHTML += createQuizCardHTML(sc, idx, false);
            });
            typesetMath(); // Render MathJax for titles/types
        }

        function setupSoloQuiz() {
            showSection('solo-quiz');
            const container = document.getElementById('solo-quiz-container');
            container.innerHTML = '';
            currentScenarios = {};

            const sc = getRandomScenarios(1)[0];
            const key = `solo-0`;
            currentScenarios[key] = sc;
            container.innerHTML = createQuizCardHTML(sc, 0, true);
            typesetMath(); // Render MathJax for titles/types
        }

        function updateQuestionText(cardId, scenarioId) {
            const val = document.getElementById(`input-n-${cardId}`).value;
            const scenario = currentScenarios[cardId];
            
            if (val && scenario) {
                document.getElementById(`desc-${cardId}`).innerHTML = formatDesc(scenario.desc, val);
                typesetMath(document.getElementById(`desc-${cardId}`));
            }
        }

        function clearQuizCard(cardId) {
            // Clear inputs
            document.getElementById(`input-n-${cardId}`).value = '';
            document.getElementById(`input-ans-${cardId}`).value = '';
            
            // Reset description
            const scenario = currentScenarios[cardId];
            if (scenario) {
                document.getElementById(`desc-${cardId}`).innerHTML = formatDesc(scenario.desc, null);
                typesetMath(document.getElementById(`desc-${cardId}`));
            }
            
            // Hide result
            const resultDiv = document.getElementById(`result-${cardId}`);
            resultDiv.classList.add('hidden');
            resultDiv.innerHTML = '';
            
            // Focus back to first input
            document.getElementById(`input-n-${cardId}`).focus();
        }

        function checkAnswer(cardId, scenarioId) {
            const nVal = parseFloat(document.getElementById(`input-n-${cardId}`).value);
            const userAns = parseFloat(document.getElementById(`input-ans-${cardId}`).value);
            const resultDiv = document.getElementById(`result-${cardId}`);
            const scenario = currentScenarios[cardId];
            const cardElement = document.getElementById(`card-${cardId}`);

            if (isNaN(nVal) || isNaN(userAns)) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
                return;
            }

            // Calculate Correct Answer
            const correctAns = scenario.solve(nVal);
            const diff = Math.abs(correctAns - userAns);
            const isCorrect = diff <= 0.02;

            // Add visual feedback to card
            if (isCorrect) {
                cardElement.classList.add('result-correct');
                setTimeout(() => cardElement.classList.remove('result-correct'), 600);
            } else {
                cardElement.classList.add('result-incorrect');
                setTimeout(() => cardElement.classList.remove('result-incorrect'), 500);
            }

            // HTML for Result with enhanced animations
            let html = '';
            if (isCorrect) {
                html = `
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-lg p-3 sm:p-4 text-center result-correct shadow-lg">
                        <div class="result-icon">
                            <i class="fa-solid fa-circle-check text-green-500 text-3xl sm:text-4xl mb-2 animate-bounce"></i>
                        </div>
                        <h4 class="text-green-700 font-bold text-base sm:text-lg mb-1">üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! üéâ</h4>
                        <p class="text-xs sm:text-sm text-green-600 mt-1">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠ <strong>${correctAns.toFixed(2)}</strong></p>
                        <p class="text-xs text-green-500 mt-1">‡∏Ñ‡∏•‡∏≤‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á ${diff.toFixed(4)}</p>
                    </div>
                `;
            } else {
                html = `
                    <div class="bg-gradient-to-br from-red-50 to-rose-50 border-2 border-red-300 rounded-lg p-3 sm:p-4 text-center result-incorrect shadow-lg">
                        <div class="result-icon">
                            <i class="fa-solid fa-circle-xmark text-red-500 text-3xl sm:text-4xl mb-2"></i>
                        </div>
                        <h4 class="text-red-700 font-bold text-base sm:text-lg mb-1">‚ùå ‡∏ú‡∏¥‡∏î‡∏à‡πâ‡∏≤ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞</h4>
                        <p class="text-xs sm:text-sm text-red-600">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠ <strong>${correctAns.toFixed(2)}</strong></p>
                        <p class="text-xs text-slate-500 mt-1">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì: <strong>${userAns.toFixed(2)}</strong></p>
                    </div>
                `;
            }

            // Show Solution Logic
            html += `
                <div class="mt-3 sm:mt-4 bg-slate-50 p-3 sm:p-4 rounded-lg border border-slate-200 text-left text-xs sm:text-sm">
                    <p class="font-bold text-slate-700 mb-2"><i class="fa-solid fa-calculator mr-1" aria-hidden="true"></i>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥:</p>
                    <p class="text-slate-600 mb-2">‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ N = <strong>${nVal}</strong></p>
                    <div class="text-slate-800 bg-white p-3 rounded-lg border-2 border-slate-200 text-center text-sm sm:text-base md:text-lg my-3 overflow-x-auto mathjax-loading">
                        ${scenario.formula}
                    </div>
                    <p class="text-slate-600 text-center text-xs sm:text-sm mt-2">‡πÅ‡∏ó‡∏ô‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‚âà <strong class="text-blue-600 text-base">${correctAns.toFixed(2)}</strong> ${scenario.ansUnit}</p>
                </div>
            `;

            resultDiv.innerHTML = html;
            resultDiv.classList.remove('hidden');
            
            // Scroll result into view smoothly
            setTimeout(() => {
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
            
            // Trigger MathJax on new content with loading state
            const formulaDiv = resultDiv.querySelector('.mathjax-loading');
            if (formulaDiv) {
                typesetMath(formulaDiv);
            }
        }

        // Initialize MathJax after load
        document.addEventListener('DOMContentLoaded', () => {
            // Configure MathJax to wrap long equations
            if (window.MathJax) {
                MathJax.config = {
                    ...MathJax.config,
                    'HTML-CSS': {
                        ...MathJax.config['HTML-CSS'],
                        linebreaks: { automatic: true, width: 'container' }
                    },
                    'SVG': {
                        ...MathJax.config['SVG'],
                        linebreaks: { automatic: true, width: 'container' }
                    }
                };
            }
            typesetMath();
        });

    </script>
</body>
</html>
